<html>
<head>
<title>ChromaShift</title>
   <link rel="stylesheet" type="text/css" href="../../avisynth.css">
<!--
Automatically generated, don't change:
$Id: chromashift.htm,v 1.2 2004/08/13 21:57:25 wilbertd Exp $ 
-->
</head>
<body>
<h1>ChromaShift</h1>
<h2>Abstract</h2>
<b>author:</b>    Simon Walters
<br><b>version:</b>  &nbsp;2.7
<br><b>download:</b>  <a href="http://www.geocities.com/siwalters_uk/fnews.html">http://www.geocities.com/siwalters_uk/fnews.html</a><br>
<b>category:</b>  Misc Plugins<br>
<b>requirements:</b>   YV12 &amp; YUY2 &amp; RGB32 Colorspace
<hr>
<h2>Description</h2>
<p>This filter will shift the chrominance information (C == U and V together) or
the U or the V separately, by an even number of pixels, in either horizontal
direction. It can also apply an overall vertical shift of the total chrominance
information, up or down. This applies to clips in YUY2 or YV12 colourspaces.</p>
<p>Wilbert Dijkhof has kindly modified it so that it can also be used to shift
Red, Green or Blue colours independently if the input to the filter is in RGB32
colourspace.</p>
<p>This filter is primarily intended to correct improper colour registration.</p>
<p><a href="http://www.geocities.com/siwalters_uk/chromashift27.zip"><cite>Download
Version 2.7 for Avisynth 2.5 (inc source)</cite></a></p>
<p><a href="http://www.geocities.com/siwalters_uk/chromashift12.zip"><cite>Download
OldVersion 1.2 for Avisynth 2.0.x</cite></a> <font color="#000000">(just operates in
YUY2 colourspace)</font></p>
<p>Example Avisynth Syntax</p>
<p># Shift both U and V info left by 2 pixels and down by one line<br>
# <font color="#000000">Note U and/or V cannot be shifted by 1 pixel as each UV
pair of values are tied to 2 pixels in YUY2 colourspace</font></p>
<pre>LoadPlugin(&quot;ChromaShift.dll&quot;)
AVISource(&quot;Test.avi&quot;)
ConvertToYUY2 # if needed.
ChromaShift(C=-2,L=1)</pre>
<p># Shift Red info to the left by 2 pixels and Green info to the right by 1
pixel.</p>
<pre>LoadPlugin(&quot;ChromaShift.dll&quot;)
AVISource(&quot;Test.avi&quot;)
ConvertToRGB32 # if needed.
ChromaShift(R=-2,G=1)</pre>
<p># Shift both U and V info left by 2 pixels and down by 2 lines<br>
<font color="#000000"># Note U and/or V cannot be shifted by 1 pixel as each UV
pair of values are tied to 4 pixels in YV12 colourspace<br>
# L cannot be shifted by a non-even number of lines in YV12 colourspace for the
same reason</font></p>
<pre>LoadPlugin(&quot;ChromaShift.dll&quot;)
AVISource(&quot;Test.avi&quot;)
ConvertToYV12 # if needed.
ChromaShift(C=-2,L=2)</pre>
<p>The full parameter list is <code>ChromaShift</code> (<var>clip, int
&quot;C&quot;, int &quot;U&quot;, int &quot;V&quot;, int &quot;L&quot;, int
&quot;R&quot;, int &quot;G&quot;, int &quot;B&quot;</var>)</p>
<p>Any non-even parameter value for C, U or V will throw an exception as
chrominance information is only held once for every 2 pixels in a YUY2 bitmap
frame. L can be any value in YUY2 colourspace but must be even in YV12
colourspace.</p>
<p>Any value for C, U, V or L will give an error when using RGB32 colourspace.</p>
<p>Any value for R, G or B will give an error when using YUY2 or YV12 colourspace.</p>
<h3>Version History</h3>
<p>4th November - V2.7: YV12 handling added.</p>
<p>4th November - V2.6a: RGB handling added in by Wilbert Dijkhof.</p>
<p>2nd November - included missing source code.</p>
<p>30<sup>th</sup> January, 2003 – V2.5 – re-compiled to work with Avisynth
2.5.</p>
<p>14th Sep, 2002 - V1.2 - added abilty to shift left as well as right and
removed the restriction on single use of the C, U or V parameters. Also, added
the L (Line) parameter to shift vertically. Code speeded up by not using a
buffered frame.</p>
<p>13th Sep, 2002 - V1.1 - added parameters and control over C,U and V.</p>
<p>10th Sep, 2002 - First release for Avisynth</p>
<h3>Source Code</h3>
<p>All source code here is provided under the GPL license. This means you are
free to use and distribute the software and program code for no fee.&nbsp; This
also means you are free and encouraged to improve and expand upon the source
code, but only as long as you make your modified version also under the GPL, and
thus free software with access to the source code for anyone. The source code
compiles under Visual C++ 6.0 with SP4. If there is a problem with the source
code distribution, please do let me know.</p>
<p>Please email me or post to rec.video.desktop if you have any
queries/comments/ideas/bug reports</p>
<p>Copyright Simon Walters siwalters(at)hotmail.com</p>
<p><kbd>$Date: 2004/08/13 21:57:25 $</kbd></p>
</body>
</html>
